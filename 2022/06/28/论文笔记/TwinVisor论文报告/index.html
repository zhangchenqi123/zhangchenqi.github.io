<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>TwinVisor论文报告 | 牛衣古柳卖黄瓜</title>
  <meta name="keywords" content=" 论文 , 论文笔记 ">
  <meta name="description" content="TwinVisor论文报告 | 牛衣古柳卖黄瓜">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta property="og:type" content="website">
<meta property="og:title" content="categories">
<meta property="og:url" content="https://zhangchenqi123.github.io/categories/index.html">
<meta property="og:site_name" content="牛衣古柳卖黄瓜">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-03-31T02:03:35.000Z">
<meta property="article:modified_time" content="2022-03-31T02:04:02.527Z">
<meta property="article:author" content="zcq">
<meta name="twitter:card" content="summary">


<link rel="icon" href="/img/1.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/sublime.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 6.1.0"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/"
   class="avatar_target">
    <img class="avatar"
         src="/img/1.jpg"/>
</a>
<div class="author">
    <span>zcq</span>
</div>

<div class="icon">
    
        
            <a title="github"
               href="https://github.com/zhangchenqi123"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-github"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="email"
               href="mailto:1149440709@qq.com"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-email"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="neteasemusic"
               href="https://music.163.com/#/user/home?id=1486265675"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-neteasemusic"></use>
                    </svg>
                
            </a>
        
    
</div>




<ul>
    <li>
        <div class="all active" data-rel="全部文章">全部文章
            
                <small>(29)</small>
            
        </div>
    </li>
    
        
            
                <li>
                    <div data-rel="论文">
                        
                        论文
                        <small>(5)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="算法">
                        <i class="fold iconfont icon-right"></i>
                        
                        算法
                        <small>(22)</small>
                        
                    </div>
                    
                        <ul class="sub hide">
                            
                                <li>
                                    <div data-rel="算法<--->acwing">
                                        
                                        acwing
                                        
                                            <small>(15
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                                <li>
                                    <div data-rel="算法<--->sjtu机试">
                                        
                                        sjtu机试
                                        
                                            <small>(6
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                        </ul>
                    
                </li>
            
        
    
        
            
        
    
        
            
                <li>
                    <div data-rel="LLVM">
                        
                        LLVM
                        <small>(1)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="MLIR">
                        
                        MLIR
                        <small>(1)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
            
            
            
    </div>
    <div>
        
            <a class="about  hasFriend  site_url"
               
               href="/about">关于</a>
        
        <a style="width: 50%"
                
                                           class="friends">友链</a>
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="29">
<input type="hidden" id="yelog_site_word_count" value="61.6k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        友情链接
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="搜索 快捷键 i"></i>
            <div class="right-title">全部文章</div>
            <i class="iconfont icon-file-tree" data-title="切换到大纲视图 快捷键 w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="返回"></i>
            <input id="local-search-input" autocomplete="off"/>
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="大小写敏感"></i>
            <i class="iconfont icon-tag" data-title="标签"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">大纲</div>
            <i class="iconfont icon-list" data-title="切换到文章列表"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>差分</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>动态规划</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>二分</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>构造法</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>机试</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>论文</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>论文笔记</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>枚举</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>模拟</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>排序</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>数学</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>双指针</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>思维题</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>算法</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>贪心</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>图论</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>BFS</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>DFS</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>LLVM</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>MLIR</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Pass</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>trick</a>
            </li>
        
    </div>

</div>

    
    <nav id="title-list-nav">
        
        <a  class="全部文章 LLVM "
           href="/2022/10/04/LLVM/CS6120/Writing%20an%20LLVM%20pass/"
           data-tag="LLVM,Pass"
           data-author="" >
            <span class="post-title" title="Writing an LLVM pass">Writing an LLVM pass</span>
            <span class="post-date" title="2022-10-04 21:28:18">2022/10/04</span>
        </a>
        
        <a  class="全部文章 论文 "
           href="/2022/09/18/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0/02_MLIR%20A%20Compiler%20Infrastructure%20for%20the%20End%20of%20Moore%E2%80%99s%20Law/"
           data-tag="论文,论文笔记,MLIR"
           data-author="" >
            <span class="post-title" title="02_MLIR A Compiler Infrastructure for the End of Moore’s Law">02_MLIR A Compiler Infrastructure for the End of Moore’s Law</span>
            <span class="post-date" title="2022-09-18 17:53:00">2022/09/18</span>
        </a>
        
        <a  class="全部文章 MLIR "
           href="/2022/09/17/MLIR/MLIR%E7%AE%80%E4%BB%8B/"
           data-tag="MLIR"
           data-author="" >
            <span class="post-title" title="00_MLIR简介">00_MLIR简介</span>
            <span class="post-date" title="2022-09-17 22:12:00">2022/09/17</span>
        </a>
        
        <a  class="全部文章 论文 "
           href="/2022/09/15/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0/01_ScaleHLS/"
           data-tag="论文,论文笔记,MLIR"
           data-author="" >
            <span class="post-title" title="01_ScaleHLS">01_ScaleHLS</span>
            <span class="post-date" title="2022-09-15 10:21:00">2022/09/15</span>
        </a>
        
        <a  class="全部文章 算法 sjtu机试 "
           href="/2022/07/02/%E7%AE%97%E6%B3%95/sjtu%E6%9C%BA%E8%AF%95/STL/"
           data-tag="算法,模拟"
           data-author="" >
            <span class="post-title" title="STL">STL</span>
            <span class="post-date" title="2022-07-02 02:41:38">2022/07/02</span>
        </a>
        
        <a  class="全部文章 算法 sjtu机试 "
           href="/2022/07/02/%E7%AE%97%E6%B3%95/sjtu%E6%9C%BA%E8%AF%95/acwing/"
           data-tag="算法,模拟"
           data-author="" >
            <span class="post-title" title="acwing">acwing</span>
            <span class="post-date" title="2022-07-02 02:41:38">2022/07/02</span>
        </a>
        
        <a  class="全部文章 算法 sjtu机试 "
           href="/2022/07/02/%E7%AE%97%E6%B3%95/sjtu%E6%9C%BA%E8%AF%95/%E5%86%99%E6%B3%95/"
           data-tag="算法,模拟"
           data-author="" >
            <span class="post-title" title="写法">写法</span>
            <span class="post-date" title="2022-07-02 02:41:38">2022/07/02</span>
        </a>
        
        <a  class="全部文章 算法 sjtu机试 "
           href="/2022/07/02/%E7%AE%97%E6%B3%95/sjtu%E6%9C%BA%E8%AF%95/%E5%AD%97%E7%AC%A6%E4%B8%B2/"
           data-tag="算法,模拟"
           data-author="" >
            <span class="post-title" title="字符串">字符串</span>
            <span class="post-date" title="2022-07-02 02:41:38">2022/07/02</span>
        </a>
        
        <a  class="全部文章 算法 sjtu机试 "
           href="/2022/07/02/%E7%AE%97%E6%B3%95/sjtu%E6%9C%BA%E8%AF%95/%E5%BE%80%E5%B9%B4%E9%A2%98/"
           data-tag="算法,模拟"
           data-author="" >
            <span class="post-title" title="sjtu往年题">sjtu往年题</span>
            <span class="post-date" title="2022-07-02 02:41:38">2022/07/02</span>
        </a>
        
        <a  class="全部文章 算法 sjtu机试 "
           href="/2022/07/02/%E7%AE%97%E6%B3%95/sjtu%E6%9C%BA%E8%AF%95/%E6%A8%A1%E6%8B%9F%E9%A2%98/"
           data-tag="机试,模拟"
           data-author="" >
            <span class="post-title" title="模拟题">模拟题</span>
            <span class="post-date" title="2022-07-02 02:41:38">2022/07/02</span>
        </a>
        
        <a  class="全部文章 论文 "
           href="/2022/06/28/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0/TwinVisor%E8%AE%BA%E6%96%87%E6%8A%A5%E5%91%8A/"
           data-tag="论文,论文笔记"
           data-author="" >
            <span class="post-title" title="TwinVisor论文报告">TwinVisor论文报告</span>
            <span class="post-date" title="2022-06-28 00:00:00">2022/06/28</span>
        </a>
        
        <a  class="全部文章 算法 acwing "
           href="/2022/04/15/%E7%AE%97%E6%B3%95/acwing/%E5%9B%BE%E8%AE%BA_%E5%8D%95%E6%BA%90%E6%9C%80%E7%9F%AD%E8%B7%AF%E9%97%AE%E9%A2%98/"
           data-tag="算法,图论"
           data-author="" >
            <span class="post-title" title="图论_单源最短路问题">图论_单源最短路问题</span>
            <span class="post-date" title="2022-04-15 11:23:49">2022/04/15</span>
        </a>
        
        <a  class="全部文章 算法 acwing "
           href="/2022/04/10/%E7%AE%97%E6%B3%95/acwing/%E4%BA%8C%E5%88%86/"
           data-tag="算法,二分"
           data-author="" >
            <span class="post-title" title="二分">二分</span>
            <span class="post-date" title="2022-04-10 22:57:08">2022/04/10</span>
        </a>
        
        <a  class="全部文章 算法 acwing "
           href="/2022/04/10/%E7%AE%97%E6%B3%95/acwing/%E6%8E%92%E5%BA%8F/"
           data-tag="算法,排序"
           data-author="" >
            <span class="post-title" title="排序">排序</span>
            <span class="post-date" title="2022-04-10 22:57:08">2022/04/10</span>
        </a>
        
        <a  class="全部文章 算法 acwing "
           href="/2022/04/10/%E7%AE%97%E6%B3%95/acwing/%E6%9E%84%E9%80%A0/"
           data-tag="算法,构造法"
           data-author="" >
            <span class="post-title" title="构造">构造</span>
            <span class="post-date" title="2022-04-10 22:47:34">2022/04/10</span>
        </a>
        
        <a  class="全部文章 算法 acwing "
           href="/2022/04/10/%E7%AE%97%E6%B3%95/acwing/%E6%9E%9A%E4%B8%BE/"
           data-tag="算法,枚举"
           data-author="" >
            <span class="post-title" title="枚举">枚举</span>
            <span class="post-date" title="2022-04-10 21:55:41">2022/04/10</span>
        </a>
        
        <a  class="全部文章 算法 acwing "
           href="/2022/03/31/%E7%AE%97%E6%B3%95/acwing/trick/"
           data-tag="算法,trick"
           data-author="" >
            <span class="post-title" title="trick">trick</span>
            <span class="post-date" title="2022-03-31 19:33:36">2022/03/31</span>
        </a>
        
        <a  class="全部文章 算法 "
           href="/2022/03/31/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%9201/"
           data-tag="算法,动态规划"
           data-author="" >
            <span class="post-title" title="动态规划01">动态规划01</span>
            <span class="post-date" title="2022-03-31 13:22:19">2022/03/31</span>
        </a>
        
        <a  class="全部文章 算法 acwing "
           href="/2022/03/31/%E7%AE%97%E6%B3%95/acwing/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"
           data-tag="算法,动态规划"
           data-author="" >
            <span class="post-title" title="动态规划">动态规划</span>
            <span class="post-date" title="2022-03-31 13:22:19">2022/03/31</span>
        </a>
        
        <a  class="全部文章 算法 acwing "
           href="/2022/03/31/%E7%AE%97%E6%B3%95/acwing/%E6%80%9D%E7%BB%B4%E9%A2%98/"
           data-tag="算法,思维题"
           data-author="" >
            <span class="post-title" title="思维题">思维题</span>
            <span class="post-date" title="2022-03-31 13:22:19">2022/03/31</span>
        </a>
        
        <a  class="全部文章 算法 acwing "
           href="/2022/03/31/%E7%AE%97%E6%B3%95/acwing/%E5%B7%AE%E5%88%86/"
           data-tag="算法,差分"
           data-author="" >
            <span class="post-title" title="差分">差分</span>
            <span class="post-date" title="2022-03-31 13:22:19">2022/03/31</span>
        </a>
        
        <a  class="全部文章 算法 acwing "
           href="/2022/03/31/%E7%AE%97%E6%B3%95/acwing/%E5%9B%BE%E8%AE%BA_%E5%9F%BA%E7%A1%80/"
           data-tag="算法,图论"
           data-author="" >
            <span class="post-title" title="图论_基础">图论_基础</span>
            <span class="post-date" title="2022-03-31 13:22:19">2022/03/31</span>
        </a>
        
        <a  class="全部文章 算法 acwing "
           href="/2022/03/31/%E7%AE%97%E6%B3%95/acwing/%E6%95%B0%E5%AD%A6/"
           data-tag="算法,数学"
           data-author="" >
            <span class="post-title" title="数学">数学</span>
            <span class="post-date" title="2022-03-31 13:22:19">2022/03/31</span>
        </a>
        
        <a  class="全部文章 算法 acwing "
           href="/2022/03/31/%E7%AE%97%E6%B3%95/acwing/%E8%B4%AA%E5%BF%83/"
           data-tag="算法,贪心"
           data-author="" >
            <span class="post-title" title="贪心">贪心</span>
            <span class="post-date" title="2022-03-31 13:22:19">2022/03/31</span>
        </a>
        
        <a  class="全部文章 算法 acwing "
           href="/2022/03/31/%E7%AE%97%E6%B3%95/acwing/%E5%8F%8C%E6%8C%87%E9%92%88/"
           data-tag="算法,双指针"
           data-author="" >
            <span class="post-title" title="双指针">双指针</span>
            <span class="post-date" title="2022-03-31 13:22:13">2022/03/31</span>
        </a>
        
        <a  class="全部文章 算法 acwing "
           href="/2022/03/31/%E7%AE%97%E6%B3%95/acwing/BFS/"
           data-tag="算法,BFS"
           data-author="" >
            <span class="post-title" title="BFS">BFS</span>
            <span class="post-date" title="2022-03-31 13:19:34">2022/03/31</span>
        </a>
        
        <a  class="全部文章 算法 acwing "
           href="/2022/03/31/%E7%AE%97%E6%B3%95/acwing/DFS/"
           data-tag="算法,DFS"
           data-author="" >
            <span class="post-title" title="DFS">DFS</span>
            <span class="post-date" title="2022-03-31 13:19:29">2022/03/31</span>
        </a>
        
        <a  class="全部文章 论文 "
           href="/2022/03/02/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0/00_How%20to%20Read%20a%20Paper/"
           data-tag="论文,论文笔记"
           data-author="" >
            <span class="post-title" title="How to read a paper">How to read a paper</span>
            <span class="post-date" title="2022-03-02 00:00:00">2022/03/02</span>
        </a>
        
        <a  class="全部文章 论文 "
           href="/2022/03/02/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0/Else/"
           data-tag="论文,论文笔记"
           data-author="" >
            <span class="post-title" title="如何通过文献掌握学术动态">如何通过文献掌握学术动态</span>
            <span class="post-date" title="2022-03-02 00:00:00">2022/03/02</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="切换全屏 快捷键 s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-论文笔记/TwinVisor论文报告" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">TwinVisor论文报告</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="论文">论文</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color3">论文</a>
            
            <a class="color5">论文笔记</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            发布时间 : <time class="date" title='最后更新: 2022-09-20 10:51:07'>2022-06-28 00:00</time>
        
    </div>
    <div class="article-meta">
        
        <span>字数:3.3k</span>
        
        
        <span id="busuanzi_container_page_pv">
            阅读 :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
        <span class="top-comment" title="跳转至评论区">
            <a href="#comments">
                评论:<span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </a>
        </span>
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#TwinVisor-Hardware-isolated-Confifidential-VirtualMachines-for-ARM"><span class="toc-text">TwinVisor: Hardware-isolated Confifidential VirtualMachines for ARM</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-text">基本概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E7%9A%84%E8%83%8C%E6%99%AF"><span class="toc-text">问题的背景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E7%9A%84%E6%8F%90%E5%87%BA"><span class="toc-text">问题的提出</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E7%9B%AE%E6%A0%87"><span class="toc-text">设计目标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%91%E6%88%98"><span class="toc-text">挑战</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-text">解决方案</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0"><span class="toc-text">实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E8%AF%84%E4%BC%B0"><span class="toc-text">性能评估</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%84%E4%BB%B7"><span class="toc-text">评价</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E5%8D%9A%E5%AE%A2"><span class="toc-text">参考博客</span></a></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="TwinVisor-Hardware-isolated-Confifidential-VirtualMachines-for-ARM"><a href="#TwinVisor-Hardware-isolated-Confifidential-VirtualMachines-for-ARM" class="headerlink" title="TwinVisor: Hardware-isolated Confifidential VirtualMachines for ARM"></a>TwinVisor: Hardware-isolated Confifidential VirtualMachines for ARM</h1><blockquote>
<p>Dingji Li, Zeyu Mi, Yubin Xia, Binyu Zang, Haibo Chen, Haibing Guan</p>
<p><em>SOSP ’21, October 26–29, 2021, Virtual Event, Germany</em></p>
<p>© 2021 Association for Computing Machinery.</p>
<p>ACM ISBN 978-1-4503-8709-5&#x2F;21&#x2F;10. . . $15.00</p>
<p><a target="_blank" rel="noopener" href="https://doi.org/10.1145/3477132.3483554">https://doi.org/10.1145/3477132.3483554</a></p>
<p><strong>Keywords</strong>: Cloud Computing, Virtualization, Confifidential Computing, ARM TrustZone</p>
</blockquote>
<p>论文报告作者：<strong>张辰琦</strong></p>
<p>本篇报告在开头提炼和明确了论文中的几个<strong>核心概念</strong>，下面首先介绍了问题的<strong>研究背景</strong>(research background)，借此提出了本文研究的<strong>主要问题</strong>(research problem)。随后，介绍了作者<strong>实现目标</strong>(research gap)与遇到的<strong>困难挑战</strong>(research challenges)，针对这些挑战，讲解了作者一系列的<strong>解决方案</strong>(methods)。之后介绍了作者的<strong>实现</strong>(implement)和对实现原型的<strong>性能评估</strong>(evaluation)，最后，我对这篇文章做出一些<strong>评价</strong>(comment)。</p>
<h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><p>Confidential computing：机密计算</p>
<blockquote>
<p>它利用硬件来提供可验证的隔离执行环境</p>
</blockquote>
<p>Confidential VM：机密虚拟机 &#x3D; secure VM &#x3D; S-VM</p>
<blockquote>
<p>它为对云提供商的云租户提供了一个孤立的执行环境</p>
</blockquote>
<p>TEE（Trusted Execution Environment）可信执行环境</p>
<blockquote>
<p>它是一种环境，其中执行的<strong>代码</strong>和访问的<strong>数据</strong>在机密性（没有人可以访问数据）和完整性（没有人可以更改代码及其行为）方面被隔离和保护</p>
</blockquote>
<p>TrustZone</p>
<blockquote>
<p>ARM公司在2003年提出来的一种成熟的硬件扩展，用来在移动平台上提供TEE。</p>
<p>他能够将服务器划分为两个世界，normal  world （常规世界）  a  secure world（安全世界）</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/zhangchenqi123/imgCloud/main/img/20220628104851.png" alt="Fig1. TrustZone架构，其将处理器分划为安全世界和常规世界，包含3层：EL0 是应用层，EL1是内核层，EL2（如果有）是虚拟机管理程序层。"></p>
<p>N-visor</p>
<blockquote>
<p>TwinVisor重用常规世界内的已经存在的系统管理程序</p>
</blockquote>
<p>S-visor</p>
<blockquote>
<p>TwinVisor在安全世界创建的新的小型的系统管理程序</p>
</blockquote>
<p>Trusted computing base</p>
<blockquote>
<p>计算机系统的可信计算基础(TCB)是对其安全性至关重要的所有硬件、固件和&#x2F;或软件组件的集合，在这种意义上，发生在TCB内部的bug或漏洞可能会危及整个系统的安全属性。相比之下，TCB之外的计算机系统的某些部分必须不能有不正常的行为，泄露超出根据安全策略授予它们的任何特权。</p>
<p>精心设计和实现系统的可信计算基础对系统的整体安全性至关重要。现代操作系统努力减少TCB(未在主体中验证)的大小，以便对其代码库进行彻底的检查(通过手动或计算机辅助的软件审计或程序验证)变得可行。</p>
</blockquote>
<h2 id="问题的背景"><a href="#问题的背景" class="headerlink" title="问题的背景"></a>问题的背景</h2><p>随着云计算的兴起，用户对数据安全性的要求也越来越高，所以<strong>机密计算</strong>也随之受关注，因为它能利用硬件提供隔离执行环境从而保护敏感的数据。机密计算有三个级别：应用级、容器级、<strong>虚拟机级</strong>，其中<strong>虚拟机级的机密计算</strong>由于与Iaas云的兼容性等众多优点被关注更多。</p>
<p>目前，各大云供应商都提供了<strong>机密虚拟机服务</strong>，比如谷歌云、IBM云等，ARM的用户也很关注ARM服务器什么时候才会提供机密虚拟机服务。虽然ARM最近宣布了一个ARMv9的扩展CCA能支持机密虚拟机，但是根据他们的路线图，<strong>ARM硬件在一两年内还不能用机密虚拟机</strong>，此外，目前还不清楚如何设计和实现建立在CCA上的系统。</p>
<p>但是，ARM有一个成熟的的硬件扩展<strong>TrustZone</strong>，它能够把服务器划分为两个独立的世界：<strong>常规世界和安全世界</strong>（a  normal world  and a secure world），因此TrustZone在移动平台上被广泛用来提供可信执行环境TEE。此外，<strong>TrustZone最近引入了具有安全EL2扩展的硬件虚拟化，能够支持在安全世界内高效运行虚拟机</strong>。</p>
<h2 id="问题的提出"><a href="#问题的提出" class="headerlink" title="问题的提出"></a>问题的提出</h2><p>我们的一个关键问题是：<strong>是否有可能通过新的软件设计，来改造成熟的硬件特性，从而让ARM服务器能够支持机密虚拟机服务？</strong></p>
<p>本文中，作者提出的<strong>TwinVisor</strong>，这是第一个<strong>能为ARM服务器提供硬件隔离的机密虚拟机的系统</strong>，它包括<strong>N-visor和S-Visor</strong>。</p>
<p><strong>N-visor</strong>是TwinVisor重用的常规世界内的已有的管理程序，作用是管理硬件资源并为安全虚拟机和常规虚拟机（S-VM和N-VM）提供服务；<strong>S-visor</strong>是TwinVisor在安全世界中创建的很多小的管理程序，它被专门用来保护安全虚拟机（S-VMs)。</p>
<h2 id="设计目标"><a href="#设计目标" class="headerlink" title="设计目标"></a>设计目标</h2><p>TwinVisor在不扩大TCB的情况下，能让安全世界对常规世界的软件开放。</p>
<p><strong>具体的目标有三个：</strong></p>
<p><strong>G1 安全性</strong>：安全虚拟机不能被不可信软件非法访问，TCB要小</p>
<p><strong>G2 高效性</strong>：有没有TwinVisor对安全虚拟机的执行效率来说应该差不多</p>
<p><strong>G3 最小改变</strong>：TwinVisor应该引入最小的改变</p>
<p><strong>核心架构：</strong></p>
<p><img src="https://raw.githubusercontent.com/zhangchenqi123/imgCloud/main/img/20220627085412.png" alt="Fig2. TwinVisor 核心架构"></p>
<ol>
<li>N-visor可以管理S-VM和N-VM的硬件资源，S-visor只管理S-VM。</li>
<li>N-Visor掌管硬件资源，为S-visor提供服务，S-visor负责保护他们。</li>
<li>当创建S-VM的时候，N-visor给它分配硬件资源，当N-visor想要运行虚拟机的时候，它把控制流交给S-visor。</li>
</ol>
<h2 id="挑战"><a href="#挑战" class="headerlink" title="挑战"></a>挑战</h2><p>现存的TurstZone设计方式给TwinVisor的实现带来了3个挑战。</p>
<p><strong>Challenge1 独立的权限模型：TrustZone的安全世界不比常规世界有更多的权限，这样安全世界就不能透明的拦截常规世界的一些指令，比如trap-and-emulate</strong></p>
<p><strong>Challenge2 静态资源分配：TrustZone采用了一种静态资源分区的策略。这导致安全虚拟机的资源利用率很低</strong></p>
<p><strong>Challenge3 不频繁的两个世界的转换：TrustZone的世界转换太慢了，而TwinVisor要频繁转换</strong></p>
<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>针对这3个问题，我们分别提出了3种解决方案：</p>
<p><strong>S olution1:逻辑上剥夺N-Visor的权力的模型</strong></p>
<blockquote>
<p><strong>可能的方案：</strong>用PV模型。</p>
<p><strong>缺点</strong>：会导致大量的世界转换，会引入大量的修改</p>
</blockquote>
<p>提出了H-trap，一种类似trap的机制，使S-visor能够检查N-visor的操作</p>
<p>提出原因：在S-visor运行虚拟机之前，任何管理程序或者虚拟机配置都不能影响S-VM的执行</p>
<p>内容：</p>
<ol>
<li>所有的对配置的检查都在S-visor进入S-VM的时候再开始批量进行</li>
<li>H-Trap不为两个visor的交流提供任何共享的PV数据结构，而是重用已经存在的硬件接口</li>
<li>S-visor检查CPU寄存器和内存之间的映射，并在进入S-VM之前阻止非法状态</li>
<li>S-visor尽量不会让N-visor读写寄存器，当N-visor必须读到寄存器的值的时候，S-visor会选择性的开放几个寄存器。</li>
</ol>
<p><strong>Solution2:内存资源的协同管理</strong></p>
<p>设计了一种分割连续内存分配器（split CMA)，常规世界和安全世界都能用它协作来<strong>给常规世界动态分配内存</strong></p>
<p><strong>重用操作系统中已有的CMA</strong>（Contiguous Memory Allocator）</p>
<ol>
<li><p>split CMA尽量保持<strong>安全内存是连续的</strong>,解决TZASC无法支持页面粒度动态地更改物理内存的安全状态的问题</p>
</li>
<li><p>split CMA可以再常规世界和常规世界分成两个模块：<strong>常规端和安全端</strong>,他们能够相互协作来转换内存的安全属性。如果S-visor不占用内存，常规端就把他们给了内存分配器，给常规内存分配，当S-visor需要更多内存，常规端就会收集内存，把内存给了安全端。反之同理。解决N-visor不能感知内存安全性的动态变化的问题</p>
</li>
<li><p><strong>内存管理</strong>：split CMA设计了<strong>层次结构</strong>来管理内存:</p>
<ul>
<li><strong>上层</strong>：把所有的空余内存都组织到一个内存池中，并且增大了内存的分配粒度（防止锁竞争导致性能下降）</li>
<li><strong>中层</strong>：内存池被分割成可变大小的内存块，每个块包含很多页并且只属于一个S-VM，块内存的地址跟块的大小对齐。</li>
<li><strong>底层</strong>：内存块被当做内存页的缓存，维持了一个bitmap来记录那个页是闲置的。</li>
</ul>
</li>
<li><p><strong>内存压缩</strong>：解决常规端向安全端借内存，而安全端的内存不连续的问题。做法就是把不连续的内存放到连续的最前面。</p>
</li>
</ol>
<p><strong>Solution3:高效的世界转换</strong></p>
<p>我们发现原来的世界转换包含着很多冗余操作</p>
<blockquote>
<p><strong>从前的做法</strong>：结合使用侧核轮询和共享内存。</p>
<p><strong>缺点</strong>：浪费CPU资源，很难决定用多少核</p>
</blockquote>
<ol>
<li>使用<strong>共享页面</strong>在两个hypervisor之间传输vCPU的通用寄存器的值</li>
<li>TwinVisor利用<strong>寄存器继承</strong>来进一步避免冗余操作。</li>
</ol>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><p><strong>1.I&#x2F;O虚拟化</strong></p>
<p>TwinVisor用 shadow I&#x2F;O rings 和 shadow DMA buffers 实现<strong>对S-VM透明、重用已有的代码</strong></p>
<p><strong>问题：</strong></p>
<ul>
<li><p>在Linux中，二者都是从S-VM的安全区内分配的，这对N-visor不可见</p>
</li>
<li><p>Shadow I&#x2F;O ring给应用程序带来很大的开销</p>
</li>
</ul>
<p><strong>解决：</strong></p>
<ul>
<li><p>S-visor在N-visor的常规内存中复制shadow I&#x2F;O rings和shadow DMA buffers，在两个世界中同步I&#x2F;O请求和DMA数据</p>
</li>
<li><p>利用由WFx指令和物理IRQs引起的常规虚拟机退出来支持TX shadow I&#x2F;O ring的更新。</p>
</li>
</ul>
<p><strong>2.评估的原型</strong></p>
<p><strong>功能评估</strong>：在ARM FVP平台上实现一个全功能的S-EL2.</p>
<p><strong>性能评估</strong>：用了麒麟990开发板，支持VHE，其工作原理与启用了S-EL2的硬件类似。</p>
<p><strong>安全属性：</strong></p>
<ul>
<li><p><strong>固件和s面板在系统的生命周期内是受信任的</strong></p>
</li>
<li><p><strong>S-VM的内核镜像的完整性是由S-visor强制保证的</strong></p>
</li>
<li><p><strong>每个S-VM的CUP寄存器状态是被S-visor保护的</strong></p>
</li>
<li><p><strong>S-VM之间的内存、S-VM与常规世界的内存是彼此隔离的</strong></p>
</li>
<li><p><strong>每个S-VM的I&#x2F;O数据都受到S-visor保护。</strong></p>
</li>
<li><p><strong>所有的数据和每个SVM的控制流都受到S-visor保护。</strong></p>
</li>
</ul>
<h2 id="性能评估"><a href="#性能评估" class="headerlink" title="性能评估"></a>性能评估</h2><ol>
<li><strong>微型测试</strong></li>
</ol>
<p><img src="https://raw.githubusercontent.com/zhangchenqi123/imgCloud/main/img/20220628114050.png" alt="Fig3. 比较TwinVisor和原型在超级调用和二阶页错误上的错误处理"></p>
<ul>
<li><p>与原始版本相比，TwinVisor引入73%的开销</p>
</li>
<li><p>快速转换机制加快了世界间的转换速度</p>
</li>
<li><p>没有shadow S2PT的TwinVisor会节省很多开销</p>
</li>
</ul>
<ol start="2">
<li><strong>实际世界中的应用程序的性能</strong></li>
</ol>
<p><img src="https://raw.githubusercontent.com/zhangchenqi123/imgCloud/main/img/20220628114827.png" alt="Fig4. S-VM和N-VM在TwinVisor上的性能差异"></p>
<ul>
<li>在所有的基准测试中，TwinVisor和原始版本的性能差异在5%以内，因为快速世界转换机制只占据应用程序有效执行时间的很小一部分</li>
<li>TwinVisor中的N-VM和原始版本相比只占据少于1.5%的花销</li>
</ul>
<ol start="3">
<li>稳定性测试</li>
</ol>
<p><img src="https://raw.githubusercontent.com/zhangchenqi123/imgCloud/main/img/20220628163717.png" alt="Fig5. TwinVisor和原始版本在稳定性上的比较"></p>
<ul>
<li>不管给了多少虚拟CPU，TwinVisor的花销少于5%</li>
<li>在混合工作负载中，所有基准测试的最大开销都小于6%。</li>
<li>随着S-VM的增长，TwinVisor是可扩展的。</li>
</ul>
<ol start="4">
<li>split-CMA的开销</li>
</ol>
<p><img src="https://raw.githubusercontent.com/zhangchenqi123/imgCloud/main/img/20220628164118.png" alt="Fig6. 迁移缓存的数量对使用Memaslap基准测试的内存缓存的影响。"></p>
<ul>
<li>在最坏的情况下，测试的Memcashed的吞吐量分别下降了6.84%和1.30%，开销减小的原因是多个S-VM平摊。</li>
</ul>
<h2 id="评价"><a href="#评价" class="headerlink" title="评价"></a>评价</h2><p>本文主要目的是通过软件的设计，扩展了TrustZone的特性，来达到在ARM平台上实现硬件隔离级别的机密虚拟机的效果，为此作者提出了TwinVisor。TwinVisor的一个核心设计理念是：将管理与保护解耦，他让N-visor负责管理硬件资源、提供服务，S-visor负责保护。</p>
<p>在设计时，我们可以看到作者始终有着明确的设计原则和目标：首先，为了保持安全性，作者禁止N-visor访问任何CPU寄存器的值；其次，为了保持高效性，作者对冗余操作进行了精简；最后，为了只引入最少的更改、保持简洁性，作者在设计的时候选择尽量利用已有的结构，在其上做小量修改，如hypervisor、CMA、I&#x2F;O机制等，而不是重新设计新的结构。</p>
<p>在设计之前，作者对比了现有的TrustZone与TwinVisor的设计思想的差异，明确的指出了要实现TwinVisor所面临的3个问题，即独立的权限模型、静态资源分配、不频繁的世界转换，并对这些问题逐一提出了针对性措施，条理清晰。之后，作者通过实验，测试TwinVisor与原始版本的性能差异，结果显示TwinVisor在安全虚拟机上仅造成了不到5%的性能开销，这样的结果是令人满意的。</p>
<p>文章最后，作者提出了对未来ARM的硬件设计建议，包括有选择性的透明指令捕获、细粒度的安全内存配置、直接世界交换。</p>
<h2 id="参考博客"><a href="#参考博客" class="headerlink" title="参考博客"></a>参考博客</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/xy010902100449/article/details/115273999">[1]ARM系列之ARM Trustzone 技术浅析（一）—— TEE概述&amp;ARM Trustzone硬件架构基础介绍</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/guyongqiangx/article/details/78020257">[2]一篇了解TrustZone</a></p>
<p><a target="_blank" rel="noopener" href="http://www.voycn.com/article/hypervisorjieshaoyi">[3]Hypervisor介绍(一)</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/460081164">[4]从Intel新酷睿处理器放弃SGX看机密计算技术的发展</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/950286">[5]一文看懂arm架构和x86架构有什么区别</a></p>
<p><a href="**https://zhuanlan.zhihu.com/p/382937263**">[6]关于trap and emulated的解释</a></p>

      
       <hr><span style="font-style: italic;color: gray;"> 转载请注明来源，欢迎对文章中的引用来源进行考证，欢迎指出任何有错误或不够清晰的表达。可以在下面评论区评论，也可以邮件至 1149440709@qq.com </span>
    </div>
</article>


<p>
    <a  class="dashang" onclick="dashangToggle()">赏</a>
</p>




    <div id="comments"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

<script type="text/javascript">
    $.getScript('/js/gitalk.js', function () {
        var gitalk = new Gitalk({
            clientID: 'a21e1504f7be0f6a38fb',
            clientSecret: 'ef1fe010e546f46a175af54e364ab38228d2fa69',
            repo: 'zhangchenqi123.github.io',
            owner: 'zhangchenqi123',
            admin: ['zhangchenqi123'],
            id: decodeURI(location.pathname),
            distractionFreeMode: 'true',
            language: 'zh-CN',
            perPage: parseInt('10',10)
        })
        gitalk.render('comments')
    })
</script>




    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    ©022 张辰琦
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="切换全屏 快捷键 s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

<div class="hide_box" onclick="dashangToggle()"></div>
<div class="shang_box">
    <a class="shang_close"  onclick="dashangToggle()">×</a>
    <div class="shang_tit">
        <p>喜欢就点赞,疼爱就打赏</p>
    </div>
    <div class="shang_payimg">
        <div class="pay_img">
            <img src="/img/alipay.jpg" class="alipay" title="扫码支持">
            <img src="/img/weixin.jpg" class="weixin" title="扫码支持">
        </div>
    </div>
    <div class="shang_payselect">
        <span><label><input type="radio" name="pay" checked value="alipay">支付宝</label></span><span><label><input type="radio" name="pay" value="weixin">微信</label></span>
    </div>
</div>


</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        
        $("input[name=pay]").on("click", function () {
            if($("input[name=pay]:checked").val()=="weixin"){
                $(".shang_box .shang_payimg .pay_img").addClass("weixin_img");
            } else {
                $(".shang_box .shang_payimg .pay_img").removeClass("weixin_img");
            }
        })
        

        /*高亮代码块行号*/
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    
    function dashangToggle() {
        $(".shang_box").fadeToggle();
        $(".hide_box").fadeToggle();
    }
    

</script>

<!--加入行号的高亮代码块样式-->

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    
    .nav-right:before {
        content: ' ';
        display: block;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        opacity: 0.3;
        background: url("https://i.loli.net/2019/07/22/5d3521411f3f169375.png");
        background-repeat: no-repeat;
        background-position: 50% 0;
        -ms-background-size: cover;
        -o-background-size: cover;
        -moz-background-size: cover;
        -webkit-background-size: cover;
        background-size: cover;
    }
    

    
</style>







</html>
